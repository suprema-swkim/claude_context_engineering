# Moon Web 비즈니스 컨텍스트

> Suprema CLUe - 클라우드 기반 출입통제 및 방문자 관리 웹 포털 시스템의 비즈니스 요구사항 및 의사결정 가이드

---

## 📋 목차

1. [비즈니스 개요](#비즈니스-개요)
2. [핵심 비즈니스 도메인](#핵심-비즈니스-도메인)
3. [사용자 페르소나](#사용자-페르소나)
4. [핵심 비즈니스 규칙](#핵심-비즈니스-규칙)
5. [비즈니스 의사결정 가이드라인](#비즈니스-의사결정-가이드라인)
6. [서비스별 비즈니스 요구사항](#서비스별-비즈니스-요구사항)
7. [비즈니스 제약사항](#비즈니스-제약사항)

---

## 비즈니스 개요

### 프로젝트 미션
Suprema CLUe는 **클라우드 기반 통합 보안 관리 플랫폼**으로, 출입통제, 방문자 관리, 영상보안, 근태관리를 하나의 통합된 웹 포털에서 제공합니다.

### 비즈니스 목표
1. **통합 보안 관리**: 여러 보안 시스템을 단일 플랫폼에서 관리
2. **클라우드 기반**: 온프레미스 서버 없이 어디서나 접근 가능
3. **확장성**: 소규모 사무실부터 대규모 건물까지 확장 가능
4. **사용자 경험**: 직관적이고 사용하기 쉬운 인터페이스
5. **보안성**: 생체정보 보호 및 암호화된 통신

### 핵심 가치 제안
- **관리 효율성 향상**: 중앙 집중식 관리로 운영 비용 절감
- **실시간 모니터링**: 출입 현황 및 장치 상태 실시간 확인
- **유연한 권한 관리**: 사용자별, 시간대별 세밀한 권한 설정
- **방문자 편의성**: QR 코드 기반 간편 체크인/체크아웃
- **데이터 분석**: 출입 패턴 분석 및 인사이트 제공

---

## 핵심 비즈니스 도메인

### 1. 출입통제 (Access Control)
**목적**: 물리적 공간에 대한 접근을 제어하고 모니터링

**핵심 기능**:
- 장치 관리 (출입 단말기, 리더기, 컨트롤러)
- 출입문 제어 (원격 개폐, 스케줄 관리)
- 인증 수단 관리 (얼굴, 지문, 카드, QR, PIN)
- 출입 권한 관리 (사용자별, 출입문별, 시간대별)
- 실시간 모니터링 및 이벤트 로깅

**비즈니스 가치**:
- 무단 침입 방지
- 출입 이력 추적 및 감사
- 비상 상황 대응 (화재 시 자동 개방 등)

### 2. 방문자 관리 (Visitor Management)
**목적**: 방문자의 출입 절차를 간소화하고 보안성을 유지

**핵심 기능**:
- 방문 일정 예약 및 승인
- 방문자 체크인/체크아웃
- 동적 QR 코드 발급
- 호스트 지정 및 알림
- 방문 이력 관리

**비즈니스 가치**:
- 방문자 편의성 향상
- 수기 방명록 대체 (디지털화)
- 방문자 보안 강화
- 비대면 방문 접수

### 3. 조직 계층 관리
**목적**: 다층적 조직 구조를 지원하여 대규모 환경에 대응

**계층 구조**:
```
Branch (지사)
  └── Distributor (대리점)
        └── Place Group (공간그룹)
              └── Place (공간)
                    └── Door (출입문)
                          └── Device (장치)
```

**비즈니스 가치**:
- 분산된 조직 관리 지원
- 권한 위임 및 책임 분리
- 확장 가능한 구조

---

## 사용자 페르소나

### 1. 슈프리마 제조사 관리자 (SUPREMA_MANUFACTURE)
**역할**: 시스템 전체 관리 및 모니터링
**주요 작업**:
- 전체 시스템 상태 모니터링
- 펌웨어 배포 및 업데이트
- 기술 지원 및 문제 해결

### 2. 서비스 운영자 (SERVICE_OPERATOR)
**역할**: 서비스 운영 및 고객 지원
**주요 작업**:
- 고객 계정 관리
- 서비스 품질 모니터링
- 운영 리포트 생성

### 3. 지사/대리점 관리자 (BRANCH_ADMIN / DISTRIBUTOR_ADMIN)
**역할**: 지사 또는 대리점 단위 관리
**주요 작업**:
- 하위 공간 및 장치 관리
- 멤버 초대 및 권한 부여
- 출입 이력 조회

### 4. 공간 관리자 (PLACE_GROUP_ADMIN)
**역할**: 특정 공간(사무실, 건물 등)의 출입 관리
**주요 작업**:
- 출입문 설정 및 제어
- 사용자 인증 수단 등록
- 출입 권한 부여
- 방문자 승인

### 5. 일반 사용자 (USER)
**역할**: 출입 권한을 가진 직원
**주요 작업**:
- 인증 수단 등록 (얼굴, 카드 등)
- 출입 이력 조회
- 프로필 관리

### 6. 방문자 회원 (VISITOR_MEMBER)
**역할**: 방문 예약 및 체크인/체크아웃
**주요 작업**:
- 방문 일정 신청
- QR 코드 수신 및 사용
- 방문 이력 조회

### 7. 호스트 (Company Host)
**역할**: 방문자를 접수하고 승인하는 담당자
**주요 작업**:
- 방문 일정 생성
- 방문자 승인/거절
- 방문자 알림 발송

---

## 핵심 비즈니스 규칙

### 인증 및 보안

#### 1. 생체정보 수집 동의
**규칙**: 얼굴 또는 지문 등 생체정보를 수집하기 전에 반드시 사용자의 명시적 동의를 받아야 합니다.

**이유**: 개인정보보호법 준수

**구현**:
- 생체정보 수집 전 동의서 표시
- 동의 여부 기록 및 보관
- 거부 시 대체 인증 수단 제공 (카드, PIN)

#### 2. 생체정보 저장 방식
**규칙**: 생체정보는 서버 저장 또는 Face Link 연동 중 선택 가능합니다.

**옵션**:
- **서버 저장 (Bio Into Server)**: 생체정보를 암호화하여 서버에 저장
- **링크 연동 (Bio Link / Face Link)**: 생체정보를 외부 시스템에 저장하고 링크만 관리

**의사결정 기준**:
- 높은 보안 요구사항 → Face Link 사용
- 간편한 관리 → 서버 저장

#### 3. 인증 모드
**규칙**: 보안 수준에 따라 단일 인증 또는 복합 인증을 사용합니다.

**보안 수준**:
- **낮음**: 카드 단독, QR 단독
- **중간**: 얼굴 단독, 지문 단독
- **높음**: 카드 + 얼굴, 코드 + PIN

**의사결정 기준**:
- 일반 사무실 → 카드 또는 얼굴 단독
- 서버실, 금고 → 복합 인증

### 출입 권한 관리

#### 4. 출입 권한 부여
**규칙**: 사용자는 명시적으로 출입 권한이 부여된 출입문만 통과할 수 있습니다.

**권한 유형**:
- **ALL_DOOR**: 공간 내 모든 출입문 접근 가능
- **SPECIFIC**: 특정 출입문만 접근 가능

**의사결정 기준**:
- 관리자 → ALL_DOOR
- 일반 직원 → SPECIFIC (필요한 출입문만)

#### 5. 출입 기간 제한
**규칙**: 모든 출입 권한은 유효 기간을 설정할 수 있습니다.

**기간 유형**:
- **무제한 (Unlimited)**: 영구 권한
- **기간 지정**: 시작일 ~ 종료일
- **일회성**: 1회만 사용 가능

**의사결정 기준**:
- 정규직 → 무제한
- 계약직, 임시직 → 기간 지정
- 방문자 → 일회성 또는 단기 기간

#### 6. 출입 스케줄
**규칙**: 시간대별로 출입을 제한할 수 있습니다.

**스케줄 유형**:
- **ALWAYS**: 24시간 출입 가능
- **SPECIFIC**: 특정 요일, 특정 시간대만 출입 가능

**예시**:
- 야간 보안 직원 → ALWAYS
- 일반 직원 → 평일 09:00~18:00

### 출입문 제어

#### 7. 출입문 상태 관리
**규칙**: 출입문은 다음 상태 중 하나를 가집니다.

**상태**:
- **NORMAL**: 정상 동작 (인증 시 개방)
- **INCIDENT**: 장애 발생 (문 센서 오류, 네트워크 끊김 등)

**알림**:
- INCIDENT 상태 → 관리자에게 즉시 알림

#### 8. 출입문 명령
**규칙**: 관리자는 원격으로 출입문을 제어할 수 있습니다.

**명령 유형**:
- **ONCE_OPEN**: 한 번만 문 열림 (다음 사람은 다시 인증 필요)
- **ALWAYS_OPEN**: 고정 개방 (인증 없이 출입 가능)
- **ALWAYS_CLOSE**: 고정 잠금 (인증해도 출입 불가)
- **RELEASE_MANUAL_MODE**: 수동 모드 해제 (정상 모드로 복귀)

**사용 시나리오**:
- 화재 발생 → ALWAYS_OPEN (비상 대피)
- 근무 시간 → ONCE_OPEN (손님 맞이)
- 폐쇄 구역 → ALWAYS_CLOSE

#### 9. 출입문 스케줄 열림/닫힘
**규칙**: 특정 시간대에 자동으로 문을 열거나 잠글 수 있습니다.

**예시**:
- 평일 09:00~18:00 → 자동 개방 (인증 없이 출입)
- 평일 18:00~익일 09:00 → 자동 잠금 (인증 필요)
- 주말 → 24시간 잠금

### 방문자 관리

#### 10. 방문 일정 승인
**규칙**: 방문 일정은 호스트 또는 관리자의 승인이 필요합니다.

**승인 프로세스**:
1. 방문자가 일정 신청
2. 호스트에게 알림 전송
3. 호스트가 승인/거절
4. 승인 시 QR 코드 발급

**자동 승인 조건**:
- 신뢰된 방문자 (이전 방문 이력 있음)
- 사전 등록된 배달/공사 업체

#### 11. 방문자 상태 관리
**규칙**: 방문자는 다음 상태를 순차적으로 거칩니다.

**상태 전이**:
```
BEFORE_VISIT (방문 예정)
    ↓ (체크인)
CHECK_IN (방문 중)
    ↓ (체크아웃)
CHECK_OUT (방문 완료)
```

**취소 조건**:
- 호스트가 방문 일정 취소
- 방문자가 자진 취소
- 방문 시간 초과 (No-show)

#### 12. 방문자 QR 코드
**규칙**: 방문자는 동적 QR 코드를 통해 출입합니다.

**QR 유형**:
- **CLUe QR**: CLUe 자체 발급 QR 코드
- **네이버 QR**: 네이버 계정 연동
- **카카오 QR**: 카카오 계정 연동

**유효 기간**:
- 방문 일정 시작 ~ 종료 시간
- 체크아웃 시 즉시 무효화

### 장치 관리

#### 13. 장치 동기화
**규칙**: 장치 설정 변경 시 자동으로 장치에 동기화됩니다.

**동기화 항목**:
- 사용자 인증 정보 (얼굴, 지문, 카드)
- 출입 권한 변경
- 출입문 설정 변경
- 펌웨어 업데이트

**동기화 실패 시**:
- 재시도 (최대 3회)
- 실패 시 관리자 알림

#### 14. 장치 상태 모니터링
**규칙**: 장치 상태를 주기적으로 확인합니다.

**모니터링 항목**:
- 네트워크 연결 상태
- 펌웨어 버전
- 디스크 용량
- CPU/메모리 사용률

**임계값 초과 시**:
- 관리자에게 알림
- 자동 로그 업로드

#### 15. 펌웨어 업그레이드
**규칙**: 펌웨어 업그레이드는 관리자 승인 후 진행됩니다.

**업그레이드 절차**:
1. 펌웨어 버전 확인
2. 관리자 승인
3. 업그레이드 실행
4. 재부팅
5. 버전 확인

**롤백 조건**:
- 업그레이드 실패
- 장치 오동작 발생

### 이벤트 및 로그

#### 16. 이벤트 로깅
**규칙**: 모든 인증 시도 및 출입 이벤트는 로그로 기록됩니다.

**로깅 항목**:
- 인증 성공/실패
- 출입문 개폐
- 장치 명령 전송
- 관리자 작업 이력

**보관 기간**:
- 인증 이벤트: 1년
- 감사 로그: 3년
- 알람 이벤트: 2년

#### 17. 감사 로그 (Audit Log)
**규칙**: 관리자의 모든 작업은 감사 로그로 기록됩니다.

**기록 항목**:
- 작업 수행자 (관리자 ID, IP 주소)
- 작업 대상 (사용자, 출입문, 장치 등)
- 작업 유형 (생성, 수정, 삭제, 명령)
- 작업 시간

**감사 목적**:
- 보안 사고 추적
- 책임 소재 파악
- 규정 준수 (Compliance)

---

## 비즈니스 의사결정 가이드라인

### 기능 우선순위 결정

#### 우선순위 1: 보안 및 안전
**예시**:
- 화재 시 자동 문 개방
- 비인가 접근 차단
- 생체정보 보호

**판단 기준**: 사용자의 안전과 보안에 직접적인 영향을 주는 기능

#### 우선순위 2: 법적 준수
**예시**:
- 개인정보보호법 준수 (생체정보 동의)
- 감사 로그 보관
- 데이터 암호화

**판단 기준**: 법적 요구사항을 충족하는 기능

#### 우선순위 3: 사용자 경험
**예시**:
- 빠른 인증 속도
- 직관적인 UI
- 모바일 대응

**판단 기준**: 일상적인 사용 편의성을 높이는 기능

#### 우선순위 4: 관리 효율성
**예시**:
- 일괄 권한 부여
- 자동 리포트 생성
- 대시보드

**판단 기준**: 관리자의 운영 부담을 줄이는 기능

#### 우선순위 5: 고급 기능
**예시**:
- AI 분석
- 예측 유지보수
- 외부 시스템 연동

**판단 기준**: 부가 가치를 제공하지만 필수는 아닌 기능

### 인증 수단 선택 가이드

| 환경 | 권장 인증 수단 | 이유 |
|------|---------------|------|
| **일반 사무실** | 카드, 얼굴, 모바일 카드 | 편의성 우선, 빠른 인증 |
| **서버실, 금고** | 카드 + 얼굴, 코드 + PIN | 높은 보안 요구 |
| **공장, 건설현장** | 지문, 카드 | 장갑 착용 고려, 내구성 |
| **방문자** | QR 코드 (동적) | 임시 권한, 간편 발급 |
| **무인 건물** | PIN, 전화번호 + 이름 | 장치 설치 최소화 |

### 출입문 제어 정책 가이드

| 시나리오 | 권장 설정 | 이유 |
|---------|----------|------|
| **업무 시간 (09:00~18:00)** | 스케줄 열림 또는 ONCE_OPEN | 직원 편의성 |
| **야간 (18:00~09:00)** | 스케줄 잠금 | 보안 강화 |
| **주말** | 24시간 잠금 | 보안 강화 |
| **화재 발생** | ALWAYS_OPEN | 비상 대피 |
| **보안 사고** | ALWAYS_CLOSE | 접근 차단 |
| **이벤트 (손님 맞이)** | ONCE_OPEN | 임시 개방 |

### 방문자 관리 정책 가이드

| 방문 목적 | 승인 절차 | QR 유효 기간 | 출입 권한 |
|----------|----------|-------------|----------|
| **미팅** | 호스트 승인 필요 | 방문 시작 ~ 종료 시간 | 로비 + 회의실 |
| **배달** | 자동 승인 가능 | 30분 | 로비 + 입구 |
| **공사** | 관리자 승인 필요 | 1일 ~ 수개월 | 공사 구역만 |
| **정기 방문자** | 자동 승인 | 반복 일정 | 필요 구역 |

---

## 서비스별 비즈니스 요구사항

### 출입통제 (Access Control)

#### 비즈니스 목표
- 무단 침입 방지율 99.9% 이상
- 인증 속도 1초 이내
- 장치 가동률 99% 이상

#### 핵심 성과 지표 (KPI)
- 인증 성공률
- 인증 실패 원인 분석
- 장치 다운타임
- 출입 이벤트 처리량

#### 비즈니스 시나리오

##### 시나리오 1: 신규 직원 입사
1. 관리자가 직원 계정 생성
2. 출입 권한 부여 (출입문, 기간, 스케줄)
3. 인증 수단 등록 (얼굴, 카드)
4. 생체정보 수집 동의
5. 장치 동기화
6. 직원이 출입 테스트

##### 시나리오 2: 퇴사 처리
1. 관리자가 출입 권한 삭제
2. 장치 동기화 (인증 정보 삭제)
3. 계정 비활성화 또는 삭제
4. 감사 로그 기록

##### 시나리오 3: 비상 상황 (화재)
1. 화재 감지기 신호 수신
2. 화재 연동 구역의 모든 출입문 자동 개방
3. 관리자에게 알림 전송
4. 이벤트 로그 기록
5. 상황 종료 후 정상 모드 복귀

### 방문자 관리 (Visitor Management)

#### 비즈니스 목표
- 방문자 체크인 시간 30초 이내
- 방문 승인 처리 시간 5분 이내
- 방문자 만족도 95% 이상

#### 핵심 성과 지표 (KPI)
- 방문 예약 건수
- 방문 승인율
- No-show 비율
- 평균 체크인/체크아웃 시간

#### 비즈니스 시나리오

##### 시나리오 1: 방문 예약 및 승인
1. 방문자가 웹/모바일에서 방문 일정 신청
2. 호스트에게 알림 전송 (이메일, SMS, 푸시)
3. 호스트가 승인
4. 방문자에게 QR 코드 발송
5. 방문 당일 QR 코드로 체크인
6. 방문 종료 후 체크아웃

##### 시나리오 2: 반복 방문자 (배달 기사)
1. 관리자가 배달 업체 등록 (자동 승인 설정)
2. 배달 기사가 방문 신청
3. 자동 승인 및 QR 코드 발급
4. 체크인 → 배달 → 체크아웃
5. 방문 이력 자동 기록

##### 시나리오 3: 대규모 이벤트 (세미나)
1. 관리자가 이벤트 일정 생성
2. 참가자 명단 일괄 등록
3. QR 코드 일괄 발송
4. 이벤트 당일 체크인
5. 실시간 참석자 현황 모니터링

---

## 비즈니스 제약사항

### 기술적 제약
1. **플랫폼**: Web 전용 (Flutter Web)
2. **브라우저**: Chrome, Safari, Edge 최신 버전 지원
3. **네트워크**: 인터넷 연결 필수 (클라우드 기반)
4. **장치**: Suprema 제품만 지원

### 법적 제약
1. **개인정보보호법**: 생체정보 수집 시 명시적 동의 필요
2. **데이터 보관**: 감사 로그 3년 보관
3. **데이터 암호화**: 전송 및 저장 시 암호화 필수

### 운영 제약
1. **동시 사용자**: 최대 1,000명
2. **장치 수**: 공간당 최대 100개
3. **API 응답 시간**: 평균 500ms 이하
4. **가동 시간**: 99.9% SLA

### 비용 제약
1. **클라우드 비용**: AWS 서비스 사용
2. **스토리지**: 생체정보 저장 시 비용 증가
3. **API 호출**: 과도한 호출 시 과금

---

## 의사결정 체크리스트

### 새로운 기능 추가 시
- [ ] 보안에 영향을 주는가?
- [ ] 법적 요구사항을 충족하는가?
- [ ] 사용자 경험을 개선하는가?
- [ ] 기존 기능과 충돌하지 않는가?
- [ ] 성능에 영향을 주는가?
- [ ] 확장 가능한 구조인가?
- [ ] 테스트 가능한가?
- [ ] 문서화가 필요한가?

### 데이터 모델 설계 시
- [ ] 개인정보가 포함되는가? → 암호화 필요
- [ ] 생체정보인가? → 동의 절차 필요
- [ ] 감사 로그가 필요한가?
- [ ] 삭제 정책은 무엇인가? (Hard delete vs Soft delete)
- [ ] 보관 기간은 얼마인가?

### API 설계 시
- [ ] 인증이 필요한가?
- [ ] 권한 확인이 필요한가?
- [ ] 응답 시간 목표를 충족하는가?
- [ ] 에러 처리가 명확한가?
- [ ] 로깅이 적절한가?

---

## 버전 정보

- **문서 생성일**: 2026-01-05
- **작성자**: Claude Code
- **프로젝트 버전**: v1.0

---

> 이 문서는 비즈니스 의사결정의 가이드라인을 제공합니다.
> 새로운 비즈니스 요구사항이 발생하면 이 문서를 업데이트해 주세요.
