---
description: 프로젝트 개발을 시작하는 메인에이전트 명령어
---

# 🚀 프로젝트 개발 시작 (Main Agent)

서브에이전트들을 총괄하며 프로젝트 구현 계획을 분석하고 단계별 개발을 진행합니다.

> ⚠️ **중요**: 이 커맨드는 반드시 **Plan Mode**에서 실행되어야 합니다.


## 핵심 원칙

- **명확화 질문하기**: 모든 모호함, 엣지 케이스, 명확하지 않은 동작을 파악합니다. 가정하지 말고 구체적이고 명확한 질문을 합니다. 구현을 진행하기 전에 사용자의 답변을 기다립니다. 질문은 초기에 합니다(코드베이스를 이해한 후, 아키텍처 설계 전).
- **행동하기 전에 이해하기**: 기존 코드 패턴을 먼저 읽고 이해합니다
- **에이전트가 식별한 파일 읽기**: 에이전트를 실행할 때 읽어야 할 가장 중요한 파일 목록을 반환하도록 요청합니다. 에이전트가 완료된 후, 다음 단계로 진행하기 전에 해당 파일들을 읽어 상세한 컨텍스트를 구축합니다.
- **단순하고 우아하게**: 읽기 쉽고, 유지보수하기 쉽고, 아키텍처적으로 견고한 코드를 우선시합니다
- **TodoWrite 사용**: 전체 진행 상황을 추적합니다

---

## 📑 목차

1. [실행 프로세스](#-실행-프로세스)
   - Step 1~5: Todo 수립 (Plan Mode)
   - Step 6~8: Todo 실행 (Normal Mode)
2. [서브에이전트 역할](#-서브에이전트-역할)
3. [참조 문서](#-참조-문서)
4. [주의사항](#️-주의사항)

---

## 📋 실행 프로세스

### Step 1. 플랜 모드 진입

`EnterPlanMode` 도구를 호출하여 플랜 모드로 진입합니다.

### Step 2. 구현 계획 분석

1. `docs/plan.md` 파일을 읽어 전체 구현 계획 파악
2. 최상위 Phase부터 순차 탐색
3. 미완료 항목(`[ ]`)이 있는 첫 번째 Phase 식별

### Step 3. Phase 선택 확인

식별된 Phase를 사용자에게 제시하고 확인을 요청합니다:

```
📌 다음 개발 Phase를 발견했습니다:

**[Phase 이름]**
- 주요 작업 1
- 주요 작업 2
- ...

이 Phase를 진행하시겠습니까? (Y/N)
```

> 사용자가 거부 시 → 다음 미완료 Phase 제안 또는 사용자 선택 대기

### Step 4. 개발 Todo 수립

사용자 승인 후, 해당 Phase에 대한 상세 개발 Todo를 작성합니다.

#### 4-1. 기술 분석
- 필요한 API 엔드포인트 확인 (`docs/api/` 참조)
- 필요한 데이터 모델 정의
- 기술 명세 확인 (`docs/techspec/techspec.md` 참조)

#### 4-2. 작업 분해
세부 작업을 우선순위에 따라 정렬하고, 담당 서브에이전트를 지정합니다.

#### 4-3. 의존성 파악
- 작업 간 순서 의존성 명시
- 병렬 처리 가능한 작업 식별

#### 4-4. Todo 형식

```
📝 개발 Todo: [Phase 이름]

**1. 사전 작업**
- [ ] 작업 내용 (@담당에이전트)

**2. 핵심 구현**
- [ ] 작업 내용 (@담당에이전트)

**3. UI 구현**
- [ ] 작업 내용 (@담당에이전트)

**4. 통합 및 테스트**
- [ ] 작업 내용 (@담당에이전트)

예상 소요: X 단계
```

### Step 5. Todo 확인 및 저장

작성된 개발 Todo을 사용자에게 제시하고 승인을 요청합니다:

```
위 개발 Todo를 진행하시겠습니까? (Y/N)
수정이 필요하면 말씀해주세요.
```

#### 5-1. Todo 파일 저장

사용자 승인 후, todo를 `docs/todos/` 폴더에 저장합니다:

| 항목 | 형식 |
|-----|-----|
| 파일명 | `phase{N}-{phase-name}-todo.md` |
| 경로 | `docs/todos/phase{N}-{phase-name}-todo.md` |
| 예시 | `docs/todos/phase0-initial-setup-todo.md` |

**Todo 파일 구조:**
```markdown
# Phase {N}: {Phase 이름} 개발 Todo

## 📌 목표
{Phase 목표 설명}

## 📝 작업 목록

### Stage 1: 사전 작업
- [ ] 작업 내용 (@담당에이전트)

### Stage 2: 핵심 구현
- [ ] 작업 내용 (@담당에이전트)

### Stage 3: UI 구현
- [ ] 작업 내용 (@담당에이전트)

### Stage 4: 통합 및 테스트
- [ ] 작업 내용 (@담당에이전트)

## ✅ 완료 기준
- [ ] 검증 항목 1
- [ ] 검증 항목 2
```

### Step 6. 플랜 모드 종료

Todo 파일 저장 완료 후 `ExitPlanMode`로 플랜 모드를 종료합니다.

### Step 7. Todo 실행

플랜 모드 종료 후 즉시 개발을 시작합니다.

| 허용 | 금지 |
|-----|-----|
| ✅ Todo 수립 및 작업 분배 | ❌ Write, Edit 등으로 직접 코드 작성 |
| ✅ 서브에이전트 호출 (Task 도구 사용) | ❌ NotebookEdit 등 파일 수정 도구 사용 |
| ✅ 진행 상황 모니터링 | |
| ✅ `docs/plan.md` 업데이트 | |

#### 실행 순서

1. **저장된 Todo 파일 참조**
   - `docs/todos/phase{N}-{phase-name}-todo.md` 파일을 읽어 작업 목록 확인

2. **Task 도구로 서브에이전트 호출**
   - 각 작업을 담당 서브에이전트에게 할당
   - 예: `Task(subagent_type='ui-ux-specialist', prompt='...')`

3. **작업 내용 명시**
   - 구체적인 작업 지시 전달
   - 필요한 컨텍스트 및 참조 문서 제공

4. **작업 완료 확인**
   - 서브에이전트 작업 완료 후 Todo 파일의 체크박스 업데이트 (`[ ]` → `[x]`)
   - `docs/plan.md`의 해당 항목도 함께 업데이트
   - 다음 작업으로 진행

5. **마일스톤 보고**
   - 각 Phase 완료 시 사용자에게 보고

### Step 8. Phase 완료

모든 작업이 완료되면:

1. `docs/plan.md`의 해당 Phase 항목을 모두 `[x]`로 변경
2. 사용자에게 Phase 완료 보고

### Step 9. 플랜 모드 종료

모든 작업 완료 후 `ExitPlanMode`로 플랜 모드를 종료합니다.

---

## 🔗 서브에이전트 역할

| # | 에이전트 | 역할 | 파일 경로 |
|---|---------|------|----------|
| 1 | API Specialist | RestClient, Repository 구현 | `.claude/agents/1.api_specialist.md` |
| 2 | State Manager | ViewModel, 상태 관리 | `.claude/agents/2.state_manager.md` |
| 3 | UI/UX Specialist | 페이지, 위젯 구현 | `.claude/agents/3.ui_ux_specialist.md` |
| 4 | Routing Manager | 라우팅, 네비게이션 | `.claude/agents/4.routing_manager.md` |
| 5 | Tester | 테스트 코드 작성 | `.claude/agents/5.tester.md` |
| 6 | Reviewer | 코드 리뷰, 품질 검증 | `.claude/agents/6.reviewer.md` |

---

## 📚 참조 문서

| 문서 | 경로 | 설명 |
|-----|-----|-----|
| 구현 계획 | `docs/plan.md` | 전체 Phase별 체크리스트 |
| 비즈니스 요구사항 | `docs/business-requirements.md` | 도메인 및 기능 요구사항 |
| 기술 명세 | `docs/techspec/techspec.md` | MVVM 패턴, 코딩 컨벤션 |
| API 문서 | `docs/api/` | 서버별 API 스펙 |
| 용어집 | `docs/glossary.md` | 프로젝트 용어 정의 |

---

## ⚠️ 주의사항

1. **🚨 메인에이전트는 절대 직접 코드를 작성하지 않습니다!**
   - 반드시 Task 도구로 서브에이전트에게 작업 할당
   - 메인에이전트는 오케스트레이터 역할만 수행

2. **사용자 확인 필수**
   - 각 단계 진행 전 반드시 사용자 승인 획득

3. **순차적 Phase 완료**
   - 각 Phase는 의존성이 있으므로 순차적으로 완료

4. **코드 생성 명령어**
   - 필요 시 `dart run build_runner build --delete-conflicting-outputs` 실행

5. **아키텍처 준수**
   - 모든 변경사항은 MVVM 패턴 준수
